Created by Rob Worthington, last modified on Aug 28, 2018 . Copied from Kwantu [Wiki](http://w.kwantu.net/display/CON/How+to+configure+notifications) on 2018-12-17.

Notifications can be configured in the workflow to alert users to information or request that they take an action.  Notifications will appear on the notifications page for the relevant users.  Users will also receive notifications by email unless they turn this feature off.  This is currently managed from the languages page.

A working example of workflow definition file is [http://kwantu8.kwantu.net:8001/kwantu_configs/eb01fb7f-8ac6-41e7-be32-bd6f022cef33:1:processDefinition](http://kwantu8.kwantu.net:8001/kwantu_configs/eb01fb7f-8ac6-41e7-be32-bd6f022cef33:1:processDefinition)

*There is one process with id `“newInsProcess`” which has both the versions of implicit and action based notifications.

Notification test cases are [documented here](https://docs.google.com/spreadsheets/d/13hg5FTI581GnES79voNLBwhr7_jKaJglABYcyrut5R0/edit#gid=1519503712).

See also [How to configure **overdue** notifications](https://github.com/kwantu/platformconfiguration/wiki/How-to-configure-overdue-notifications.).

Parameters

|Parameter|Options|meaning|
|---------|-------|-------|
|`notificationAction`	|URL <br> `"goto": "profile"` <br> `"goto": "processListing"` <br> `"goto": "subProcessInstance"` <br> `"goto": "subProfile"` <br> `"goto": "subProfileListing"` <br> `"goto": "subProfileSubProcessInstance"` <br>|Open a specific URL <br> Open the profile details tab <br> Open the workflow tab <br> Open the workflow subprocess <br> Open the sub-profile  details tab <br> Open the sub-profile workflow tab <br> Open the sub-profile subprocess <br>| 
|`messageType`	|`info` <br> `action` <br> `readReceipt` <br> `actionReceipt` <br>| Will be a simple notification with a dismiss button  <br> Will include action button configured via notificationAction <br> Will be like info but with a Dismiss button (not in scope yet) <br> Includes action buton (not in scope yet)
|`priority`	|<ul><li>`normal` <li> `action`  <li> `critical`  |<ul><li>notifications will come under notification page <li> Implemented with `messageType` <li> Means comes under blocking user interface on page until cleared. Cleared means if its `messageType` is info we need to Dismiss it, if its `messageType`  is action we need to click on action link. Once all the critical notifications are handled the user interface will be unblocked.|
|`Variables`	|`"#PROFILE_ID#"` <br> `"#PROFILE_NAME#"` <br> `"#COMMUNITY_ID#"` <br> `"#COMMUNITY_NAME#"` <br> `"#APPLICATION_ID#"` <br> `"#APPLICATION_NAME#"` <br> `"#CURRENT_USER_ID#"` <br> `"#CURRENT_USER_NAME#"` <br> `"#SUB_PROCESS_ID#"` br> `"#SUB_PROCESS_NAME#"` <br> `"#VALID_DATE#"` <br> `"#NODE_TITLE#"` <br> `"#STEP_ID#`" <br> `"#STEP_NAME#"` <br> `"#STEP_CREATED_DATE_TIME#"` <br> `"#NOTIFICATION_DATE_TIME#"` <br> `"#DUE_DATE#"`| 
|`recipients`|`{"stepAssignee":` <br> `{"role":"Capturer"}}`|Notification will be sent to use that is assigned the workflow <br> Notification be sent to any user with the designated role|


## 1. Notifications configuration
Notifications are configured at the process level or the step level.  Process level notifications are designed to cover a range of generic circumstances where notifications are needed.  Step levels notifications may be customised to the specific step.

### 1.1 Process level notifications
These notifications are automatically generated by workflow within the lifecycle of a sub process instance. These includes

|Name|Purpose|
|----|-------|
|Assignment	|A generic notification triggered every time a user is assigned the workflow for a step in a process|
|Acceptance	|A generic notification triggered every time the workflow is assigned to a role and there are multiple users with that role|
|Re-assignment	|A generic notification triggered every time the workflow is re-assigned to a new user|

All these three implicit notifications are configurable can contain actions to goto subprocess and take actions there.

**Note**
```
In case of email links it will only open the subprocess 
if the current user has access to specific subprocess
```

Example configurations:

### 1.1.1 Assignment

```javascript
                "assignment": {
                    "message": {
                        "i18n": {
                            "_id": "en",
                            "en": "\u003cdiv\u003eHi #CURRENT_USER_NAME#,\u003cbr/\u003e A new workflow is assigned to you. Please follow below link to move to subprocess\u003c/div\u003e",
                            "pt": "Workflow is assigned to you. Please follow action."
                        }
                    },
                    "messageType": "action",
                    "notificationAction": {
                        "action": {
                            "goto": "subProcessInstance"
                        },
                        "label": {
                            "i18n": {
                                "_id": "en",
                                "en": "Open subprocess",
                                "pt": "Open subprocess(pt)"
                            }
                        }
                    },
                    "priority": "normal",
                    "title": {
                        "i18n": {
                            "_id": "en",
                            "en": "Workflow acceptance #SUB_PROCESS_NAME# Test",
                            "pt": "Workflow acceptance"
                        }
                    }
                }
```

### 1.1.2 Acceptance
```javascript
                "assignmentAcceptance": {
                    "message": {
                        "i18n": {
                            "_id": "en",
                            "en": "The workflow to approve outcome #SUB_PROCESS_NAME# is waiting for you or other users with your role to accept.  Please click the link below to open the workflow and accept it."
                        }
                    },
                    "messageType": "action",
                    "notificationAction": {
                        "action": {
                            "goto": "subProcessInstance"
                        },
                        "label": {
                            "i18n": {
                                "_id": "en",
                                "en": "Open outcome"
                            }
                        }
                    },
                    "priority": "normal",
                    "title": {
                        "i18n": {
                            "_id": "en",
                            "en": "Acceptance - Workflow acceptance"
                        }
                    }
                },
```

### 1.1.3 Re-assignment

```javascript
                "reAssignment": {
                    "message": {
                        "i18n": {
                            "_id": "en",
                            "en": "The workflow to approve outcome #SUB_PROCESS_NAME# has been assigned to you."
                        }
                    },
                    "messageType": "action",
                    "notificationAction": {
                        "action": {
                            "goto": "subProcessInstance"
                        },
                        "label": {
                            "i18n": {
                                "_id": "en",
                                "en": "Open outcome"
                            }
                        }
                    },
                    "priority": "normal",
                    "title": {
                        "i18n": {
                            "_id": "en",
                            "en": "Re-assignement - Workflow reassignment"
                        }
                    }
                }
```

## 1.2 Step level notifications
These are notifications configured in the pre-action block for the step in which you want them to trigger.

```javascript
                                        {
                                            "_id": "wfNotificationEmailNew",
                                            "_seq": 2,
                                            "description": {
                                                "i18n": {
                                                    "_id": "uuid",
                                                    "en": "test"
                                                }
                                            },
                                            "method": {
                                                "notification": {
                                                    "message": {
                                                        "default": {
                                                            "i18n": {
                                                                "_id": "en",
                                                                "en": "The outcome #SUB_PROCESS_NAME# has been assigned to you for review"
                                                            }
                                                        },
                                                        "rtf": {
                                                            "markup": {
                                                                "i18n": {
                                                                    "_id": "en",
                                                                    "en": "The outcome #SUB_PROCESS_NAME# has been assigned to you for review"
                                                                }
                                                            }
                                                        },
                                                        "title": {
                                                            "i18n": {
                                                                "_id": "en",
                                                                "en": "Harvest transition - Outcome #SUB_PROCESS_NAME# waiting for review"
                                                            }
                                                        }
                                                    },
                                                    "messageType": "action",
                                                    "notificationAction": {
                                                        "action": {
                                                            "goto": "subProcessInstance"
                                                        },
                                                        "label": {
                                                            "i18n": {
                                                                "_id": "en",
                                                                "en": "Open outcome"
                                                            }
                                                        }
                                                    },
                                                    "notificationType": "workflow",
                                                    "priority": "normal",
                                                    "recipients": {
                                                        "role": "projectmanager"
                                                    }
                                                }
                                            }
                                        }
```